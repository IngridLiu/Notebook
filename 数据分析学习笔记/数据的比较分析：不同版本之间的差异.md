# 数据的比较分析：不同版本之间的差异

<br>
<br>
<br>
<br>

## 1. 

## 2. 

## 3. 

## 4. 离散型二分数据的对比

连续型的组内检验是（配对t检验），消除用户之间的差异，所以相比同等样本量的组间设计，组内设计有更高的概率检测到差异。

### 4.1 组内比较

### 4.1.1 McNemar精准检验介绍

为了判断组内任何二分变量之间是否存在显著差异，对所有大小的样本我们使用McNemar精准检验，通过计算p值来检验异序对样本比例是否大于0.5(也称为符号检验)。

McNemar精准检验：

![](http://image.woshipm.com/wp-files/2019/01/g7mP8ihxwYm9A0vmzl5o.png)

总体来说我们有7对异序对，分布式单元格c和单元格b。

![](http://image.woshipm.com/wp-files/2019/01/KkameMWjoVNyZOds0RZf.png)

我们将上面表中的数据代入公式中得到：

![](http://image.woshipm.com/wp-files/2019/01/epYjJu4eRhFCw50muILu.png)

单侧检验的p值是这两个比例的和，0.0078+0.0547=0.0625,因此双侧检验的概率是2倍（0.125）。

若是计算中间概率的话，中间概率等于观测值精准概率的一般，加上小于观测值得所有值得概率和。在上面的例子中，小于观察值的所有值得概率就是零对异序对的概率，为0.0078。

![](http://image.woshipm.com/wp-files/2019/01/AkphHcZnOMMAsIuqazYO.png)

还有McNemar卡方检验，和McNemar卡方检验的耶茨校正；但是不推荐使用，因为对于McNemar卡方检验来说，常常会低估了不同样本容量的真实概率，同时该方法在对样本容量分析效果不明确。而对于McNemar卡方检验的耶茨校正，该方法夸大了所有样本容量的真实值，所有在这里就不一一阐述了。

### 4.1.2 配对差异的置信区间

![](http://image.woshipm.com/wp-files/2019/01/vEZhuajWM5X8EN5bnED6.png)

为了估算配对二元结果间可能的差异程度，我们以上公式是采用适当Wald校正置信区间，采用2*2表格进行试验设置，该校正的方法是给每个格子中加上特定置信度下正态分布临界值平方的1/8。在95%置信度下，等于给试验总数N加入了两个伪观值。

### 4.2 组间比较

#### 4.2.1 N-1卡方检验：

![](http://image.woshipm.com/wp-files/2019/01/PM3LiBxNYDAX4YC6QjFh.png)

卡方检验计算公式：

![](http://image.woshipm.com/wp-files/2019/01/XKacz9jyWq2xEgWocaqv.png)

在计算出卡方检验的值之后可以用Excel公式CHIDIST（卡方检验的值，1），计算出p-value值；1代表的是双侧检验，0代表的是单侧检验。

N-1卡方检验适用于小样本检验，且期望单元格的次数要大于1使用，N-1是样本的校正值。

#### 4.2.2 N-1双比例检验：

![](http://image.woshipm.com/wp-files/2019/01/Ttsn8GB8mn12nQs1cext.png)

N-1双比率检验样本适用的法则是：每个样本中至少有10个成功，10个失败；且期望单元格的次数要大于1时使用。我们使用一个正态（Z）表查找双侧的p值，或者用Excel公式=（1-NORMSDIST（Z）*2），计算出双侧的p-value值。

** N-1卡方检验和N-1双比率检验的对比：**

- 计算在数值上是一致的。

- 相比卡方检验用顺利完成或失败的用户量，双比率检验用完成率或转化率（用比例形式测量）的方式思考会更简单。

- 我们采取更加熟悉和容易获取的正态分布作为参考分布计算p值，且无需担心自由度。

- 置信区间公式使用两个比例的差异，在转换中更加容易计算和理解

#### 4.2.3 Fisher精准检验：

![](http://image.woshipm.com/wp-files/2019/01/fpIAzvP55dogjueOGePz.png)

Fisher精准检验使用精准的概率来代替卡方分布和t分布中的估值，精准的计算方法更倾与保守，计算出的p值会比原来的更高一些，因此在两组的差异更大的时候才能达到统计显著。Fisher精准检验是在2*2表中边缘和（m、n、r和s单元格中的值）固定不变的情况下，表内4个实际频数变动时的所有可能组合的概率来计算p值。

适用条件：当有任意一个期望单元格次数小于1时。

** 配对差异的置信区间：**

以下是校正后Wald置信区间，只不过在这里是用于检验两个比例的差异，而不再是一个单独的比例。

![](http://image.woshipm.com/wp-files/2019/01/tXtuozTYlb0fni7uYDkx.png)

在计算校正计算比例的时候，把分子加上z临界值得平方的四分之一，把分母加上z临界值得平方的二分之一。置信度为95%时，双边检验临界值为1.96。这样做就好比每个样本个增加两个假冒的观测对象——一个成功一个失败。



<br>
<br>
<br>
<br>

## Reference:

1.[]()


