# 时间序列平稳化方法

<br>
<br>

## 1.聚合

取一段时间的平均数

<br>

## 2. 时间序列平滑模型

### 2.1 什么是时间序列平滑模型

时间序列平滑模型是指运用时间序列平滑法来构建时间序列的一个基础模型。时间序列是指将某一现象所发生的数量变化，依时间的先后顺序排列，以揭示随着时间的推移，这一现象的发展规律，从而用以预测现象发展的方向及其数量。

时间序列平滑模型主要包括简单移动平均、加权移动平均、一次指数平滑法

### 2.2 时间序列平滑模型的类型

#### 2.2.1 简单移动平均

##### 2.2.1.1 简单移动平均值

简单移动平均值：对于平稳时间序列，可以取最近的n项数值的平均值作为下期的预测值。

![](https://wiki.mbalib.com/w/images/math/c/6/f/c6f8f99164156f24b6eaf97552f54f1d.png)

yi为第i期的实际值，y(t+1)为t+1期的预测值。

#### 2.2.1.2 简单移动平均的特点

N越大，对干扰的敏感性越低，预测的稳定性越好，响应性越差。对数据不分远近，同等对待。

### 2.2.2 加权移动平均

#### 2.2.2.1 加权移动平均值

![](https://wiki.mbalib.com/w/images/math/a/d/9/ad9094d410c72bf5c57e102f64df8a4a.png)

yi为第i期的实际值

y(t+1)为第t+1期的预测值

a(i-t+n)为权重系数

##### 2.2.2.2 加权移动平均的特点

(1) n越大，预测的稳定性就好，响应性就越差；n越小，预测的稳定性就越差，响应性就越好。

(2) 近期数据的权重越大，则预测的稳定性就越差，响应性就越好；近期数据的权重越小，则预测的稳定性就越好，响应性就越差。

(3) 然而，ai和n的选择都没有固定的模式，都带有一定的经验性，究竟选用什么数值，要根据预测的实践而言。

#### 2.2.3 一次指数平滑法

##### 2.2.3.1 一次指数平滑法介绍

一次指数平滑法的预测公式:

![](https://wiki.mbalib.com/w/images/math/6/7/b/67b6833e21cd86e3291914744b952944.png)

#### 2.2.3.2 一次指数平滑法的特点

(1) a选得小一些，预测的稳定性就比较好；反之，响应性比较好。

(2) 在有趋势的情况下，一次指数平滑法预测，会出现滞后现象。

### 2.3 时间序列平滑法的python实现

```python
import pandas as pd
# Provides exponential weighted functions.指数加权滑动。
df.ewm(arg, com=None, span=None, halflife=None, alpha=None, min_periods=0, adjust=True, ignore_na=False, axis=0)
# Exponentially-weighted moving average.指数加权滑动平均。
df.ewma(arg, com=None, span=None, halflife=None, min_periods=0, freq=None, adjust=True, how=None, ignore_na=False)
```

<br>

## 3. 多项式回归

<br>

## 4. 分解

在这种方法中，对趋势和季节性都分别建模，并返回序列的其余部分。

可用statsmodels实现：

```python
from statsmodels.tsa.seasonal import seasonal_decompose
decomposition = seasonal_decompose(ts_log)
trend = decomposition.trend
seasonal = decomposition.seasonal
residual = decomposition.resid
```

<br>

## 5. 差分

处理趋势和季节性的最常用的方法之一就是差分法。在这种方法中，我们采用特定瞬间和它前一个瞬间的不同的观察结果。这主要是在提高平稳性。

pandas可以实现一阶差分：

```python
import pandas as pd
ts_log_diff = ts_log.diff()  # ts_log_diff = ts_log - ts_log.shift()
```

## Reference:

1.[](https://github.com/IngridLiu/Notebook/blob/master/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.%20%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E9%A2%84%E6%B5%8B%E5%88%9D%E5%AD%A6%E8%80%85%E6%8C%87%E5%8D%97%EF%BC%88Python%EF%BC%89.md)





